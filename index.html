<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Volktronic Crypto | GÃ¼venli AÄŸ</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">

<style>
/* --- RENK PALETÄ° VE DEÄžÄ°ÅžKENLER --- */
:root {
    --neon-blue: #00f3ff;
    --neon-pink: #ff0099;
    --neon-green: #00ff9d;
    --bg-dark: #020617;
    --glass-bg: rgba(5, 10, 25, 0.85);
    --glass-border: rgba(0, 243, 255, 0.2);
}

* { 
    box-sizing: border-box; 
}

body {
    margin: 0; 
    min-height: 100vh;
    background-color: var(--bg-dark); 
    color: #fff;
    font-family: 'Rajdhani', sans-serif;
    display: flex; 
    align-items: center; 
    justify-content: center;
    overflow-x: hidden; 
}

/* --- ARKA PLAN CANVAS (Hareketli AÄŸ Animasyonu) --- */
#cyber-canvas {
    position: fixed; 
    top: 0; 
    left: 0;
    width: 100%; 
    height: 100%; 
    z-index: -1;
    background: radial-gradient(ellipse at bottom, #0d1d31 0%, #0c0d13 100%);
}

/* --- ORTAK KART STÄ°LLERÄ° (Cam Efekti) --- */
.cyber-card {
    background: var(--glass-bg); 
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border); 
    border-radius: 15px;
    box-shadow: 0 0 25px rgba(0, 243, 255, 0.05);
    padding: 35px; 
    animation: cardEntrance 0.8s ease forwards; 
    opacity: 0;
}

@keyframes cardEntrance {
    from { 
        opacity: 0; 
        transform: translateY(30px) scale(0.95); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

.hidden { 
    display: none !important; 
}

/* --- GÄ°RÄ°Åž EKRANI Ã–ZEL --- */
#login { 
    width: 420px; 
    text-align: center; 
}

h1, h2, h3 { 
    font-family: 'Orbitron', sans-serif; 
    letter-spacing: 1px; 
}

h1 { 
    color: var(--neon-blue); 
    text-shadow: 0 0 10px rgba(0, 243, 255, 0.5); 
    margin: 0 0 5px 0; 
}

.subtitle { 
    color: #aaa; 
    font-size: 13px; 
    letter-spacing: 2px; 
    margin-bottom: 25px; 
    display: block; 
}

/* --- GÄ°RÄ°Åž ALANLARI (INPUTLAR) --- */
input, textarea {
    width: 100%; 
    padding: 15px; 
    margin-top: 15px;
    background: rgba(0,0,0,0.6); 
    border: 1px solid rgba(0, 243, 255, 0.3);
    border-radius: 8px; 
    color: var(--neon-blue);
    font-family: 'Rajdhani', sans-serif; 
    font-size: 16px; 
    font-weight: 600;
    outline: none; 
    transition: 0.3s;
}

input::placeholder, textarea::placeholder { 
    color: rgba(0, 243, 255, 0.3); 
    font-weight: 400; 
}

input:focus, textarea:focus { 
    border-color: var(--neon-blue); 
    box-shadow: 0 0 15px rgba(0, 243, 255, 0.3); 
    color: #fff; 
}

textarea { 
    min-height: 100px; 
    max-height: 200px; 
    resize: vertical; 
}

/* --- BUTONLAR --- */
button {
    width: 100%; 
    margin-top: 20px; 
    padding: 15px;
    border: none; 
    border-radius: 8px;
    font-family: 'Orbitron', sans-serif; 
    font-size: 15px; 
    font-weight: bold;
    cursor: pointer; 
    transition: 0.3s; 
    letter-spacing: 1px;
}

.primary { 
    background: rgba(0,243,255,0.1); 
    border: 1px solid var(--neon-blue); 
    color: var(--neon-blue); 
}

.primary:hover { 
    background: var(--neon-blue); 
    color: #000; 
    box-shadow: 0 0 25px rgba(0, 243, 255, 0.5); 
}

.secondary { 
    background: rgba(255,0,153,0.1); 
    border: 1px solid var(--neon-pink); 
    color: var(--neon-pink); 
}

.secondary:hover { 
    background: var(--neon-pink); 
    color: #000; 
    box-shadow: 0 0 25px rgba(255,0,153,0.5); 
}

/* --- SOHBET EKRANI GENEL YAPI (TAÅžMA SORUNU Ã‡Ã–ZÃœMÃœ) --- */
.container {
    width: 1200px; 
    max-width: 95%; 
    height: 85vh; /* Ekrana sÄ±ÄŸmasÄ± iÃ§in yÃ¼ksekliÄŸi kÄ±sÄ±tladÄ±k */
    display: flex; 
    flex-direction: column;
}

.header {
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    padding-bottom: 15px; 
    border-bottom: 1px solid rgba(0, 243, 255, 0.2); 
    margin-bottom: 20px;
    flex-shrink: 0; /* BaÅŸlÄ±ÄŸÄ±n kÃ¼Ã§Ã¼lmesini engeller */
}

.header h2 { 
    margin: 0; 
    font-size: 20px; 
}

.header h2 span { 
    color: var(--neon-green); 
}

.user-badge {
    background: rgba(0, 243, 255, 0.1); 
    border: 1px solid var(--neon-blue);
    padding: 8px 15px; 
    border-radius: 20px; 
    font-family: 'Orbitron'; 
    font-size: 12px;
}

/* --- 3 SÃœTUNLU GRID YAPISI --- */
.main-grid {
    display: grid; 
    grid-template-columns: 350px 1fr 350px; 
    gap: 20px;
    flex: 1; /* Kalan tÃ¼m boÅŸluÄŸu kaplar */
    overflow-y: hidden; /* DÄ±ÅŸ yapÄ±da scroll yok */
}

.panel {
    background: rgba(0,0,0,0.3); 
    border-radius: 12px; 
    padding: 20px;
    border: 1px solid rgba(255,255,255,0.05); 
    display: flex; 
    flex-direction: column;
    overflow-y: auto; /* Ä°Ã‡ERÄ°K TAÅžARSA BURASI KAYDIRILACAK */
}

/* Panel iÃ§indeki scroll bar'Ä± gÃ¼zelleÅŸtirme */
.panel::-webkit-scrollbar { width: 5px; }
.panel::-webkit-scrollbar-thumb { background: rgba(0,243,255,0.3); border-radius: 5px; }

.panel h3 { 
    color: var(--neon-blue); 
    font-size: 16px; 
    margin-top: 0; 
    margin-bottom: 20px; 
    text-align: center;
    border-bottom: 1px solid rgba(0,243,255,0.1);
    padding-bottom: 10px;
}

/* --- KATMAN BUTONLARI (N-01 vb.) --- */
.layers { 
    display: grid; 
    grid-template-columns: repeat(5, 1fr); 
    gap: 8px; 
    margin-bottom: 20px; 
}

.layer {
    aspect-ratio: 1; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    background: rgba(0, 243, 255, 0.05); 
    border: 1px solid rgba(0, 243, 255, 0.3);
    border-radius: 6px; 
    cursor: pointer; 
    font-family: 'Orbitron'; 
    font-weight: bold; 
    font-size: 14px;
    transition: 0.2s;
}

.layer:hover { 
    background: rgba(0, 243, 255, 0.2); 
}

.layer.active { 
    background: var(--neon-blue); 
    color: #000; 
    border-color: #fff; 
    box-shadow: 0 0 15px var(--neon-blue); 
}

/* --- ORTA PANEL (MESAJLARIN GELDÄ°ÄžÄ° YER) --- */
.messages-panel { 
    grid-column: 2; 
    border: 1px solid rgba(0, 243, 255, 0.2); 
}

#log { 
    display: flex;
    flex-direction: column;
    gap: 15px;
}

/* --- MESAJ KUTULARI TASARIMI --- */
.msg {
    padding: 15px; 
    border-radius: 10px; 
    background: rgba(0,0,0,0.6);
    border-left: 3px solid transparent; 
    animation: msgPop 0.3s ease backwards;
    display: flex; 
    flex-direction: column;
}

.msg.me { 
    border-left-color: var(--neon-blue); 
}

.msg.other { 
    border-left-color: var(--neon-pink); 
}

.msg-header { 
    display: flex; 
    justify-content: space-between; 
    margin-bottom: 10px; 
    font-size: 13px; 
}

.msg.me .msg-header b { color: var(--neon-blue); }
.msg.other .msg-header b { color: var(--neon-pink); }

.msg-text { 
    font-family: 'source code pro', monospace; 
    font-size: 14px; 
    word-break: break-all; 
    margin-bottom: 15px; 
    color: #ddd;
}

/* --- YENÄ° DEVASA KOPYALA BUTONU --- */
.copy-btn {
    align-self: center; 
    width: 100%; 
    margin: 0; 
    padding: 10px;
    background: rgba(0, 255, 157, 0.1); 
    border: 1px solid rgba(0, 255, 157, 0.5);
    color: var(--neon-green); 
    font-size: 13px; 
    border-radius: 6px;
}

.copy-btn:hover { 
    background: var(--neon-green); 
    color: #000; 
    box-shadow: 0 0 15px rgba(0, 255, 157, 0.5); 
}

/* --- SONUÃ‡ KUTUSU (ÅžÄ°FRE Ã‡Ã–ZÃœLEN YER) --- */
#result {
    margin-top: 15px; 
    padding: 15px; 
    background: rgba(0,0,0,0.5);
    border: 1px dashed rgba(0, 255, 157, 0.4); 
    border-radius: 8px;
    min-height: 80px; 
    word-break: break-all; 
    font-family: 'source code pro', monospace;
    color: var(--neon-green);
}

@keyframes msgPop { 
    from { opacity: 0; transform: translateY(10px); } 
    to { opacity: 1; transform: translateY(0); } 
}

/* --- MOBÄ°L UYUM (EÄŸer kÃ¼Ã§Ã¼k ekranda aÃ§Ä±lÄ±rsa) --- */
@media (max-width: 1000px) {
    .main-grid { 
        grid-template-columns: 1fr; 
        overflow-y: auto; 
    }
    .panel {
        overflow-y: visible;
    }
    .messages-panel { 
        height: 500px; 
        grid-column: 1; 
        overflow-y: auto;
    }
}
</style>
</head>
<body>

<canvas id="cyber-canvas"></canvas>

<div class="cyber-card" id="login">
    <h1>VOLKTRONIC</h1>
    <span class="subtitle">GÃœVENLÄ° AÄž BAÄžLANTISI</span>
    
    <input id="username" placeholder="KullanÄ±cÄ± AdÄ±" autocomplete="off">
    <input id="room" placeholder="Oda AdÄ±" autocomplete="off">
    <input id="secretKey" type="password" placeholder="Gizli Anahtar (Åžifre)" autocomplete="off">
    
    <button class="primary" onclick="window.enterRoom()">SÄ°STEME GÄ°RÄ°Åž YAP</button>
</div>

<div class="cyber-card container hidden" id="chat">
    
    <div class="header">
        <h2>ODA: <span id="roomNameDisplay"></span></h2>
        <div class="user-badge">KULLANICI: <span id="userNameDisplay" style="color:var(--neon-blue)"></span></div>
    </div>

    <div class="main-grid">
        
        <div class="panel">
            <h3>ðŸ”’ MESAJ ÅžÄ°FRELE</h3>
            
            <div class="layers" id="encLayers"></div>
            
            <textarea id="message" placeholder="GÃ¶nderilecek gizli mesajÄ± yazÄ±n..."></textarea>
            
            <button class="primary" onclick="window.encryptAndSend()">ÅžÄ°FRELE VE GÃ–NDER</button>
        </div>

        <div class="panel messages-panel">
            <h3 style="color: #fff; font-size: 12px; opacity: 0.5;">/// ÅžÄ°FRELÄ° VERÄ° AKIÅžI ///</h3>
            
            <div id="log"></div>
        </div>

        <div class="panel">
            <h3>ðŸ”“ ÅžÄ°FRE Ã‡Ã–ZÃœCÃœ</h3>
            
            <div class="layers" id="decLayers"></div>
            
            <textarea id="cipher" placeholder="Kopyalanan ÅŸifreli metni buraya yapÄ±ÅŸtÄ±rÄ±n..."></textarea>
            
            <button class="secondary" onclick="window.decryptMessage()">ÅžÄ°FREYÄ° Ã‡Ã–Z</button>
            
            <div id="result">Ã‡Ã¶zÃ¼m burada gÃ¶rÃ¼necek...</div>
        </div>
        
    </div>
</div>

<script>
    const canvas = document.getElementById('cyber-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particlesArray = [];
    
    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width; 
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2 + 1;
            this.speedX = Math.random() * 1 - 0.5; 
            this.speedY = Math.random() * 1 - 0.5;
            this.color = Math.random() > 0.5 ? '#00f3ff' : '#ff0099';
        }
        update() {
            this.x += this.speedX; 
            this.y += this.speedY;
            if (this.x > canvas.width || this.x < 0) this.speedX = -this.speedX;
            if (this.y > canvas.height || this.y < 0) this.speedY = -this.speedY;
        }
        draw() {
            ctx.fillStyle = this.color; 
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); 
            ctx.fill();
        }
    }
    
    function initCanvas() {
        particlesArray = [];
        for (let i = 0; i < 100; i++) {
            particlesArray.push(new Particle());
        }
    }
    
    function animateCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        for (let i = 0; i < particlesArray.length; i++) {
            particlesArray[i].update(); 
            particlesArray[i].draw();
            
            for (let j = i; j < particlesArray.length; j++) {
                const dx = particlesArray[i].x - particlesArray[j].x;
                const dy = particlesArray[i].y - particlesArray[j].y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 100) {
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(0, 243, 255, ${1 - distance/100})`;
                    ctx.lineWidth = 0.5;
                    ctx.moveTo(particlesArray[i].x, particlesArray[i].y);
                    ctx.lineTo(particlesArray[j].x, particlesArray[j].y);
                    ctx.stroke();
                }
            }
        }
        requestAnimationFrame(animateCanvas);
    }
    
    window.addEventListener('resize', () => { 
        canvas.width = window.innerWidth; 
        canvas.height = window.innerHeight; 
        initCanvas(); 
    });
    
    initCanvas(); 
    animateCanvas();
</script>

<script type="module" src="crypto.js"></script>

</body>
</html>
